language: go

go:
- '1.11'

env:
- GO111MODULE=on

before_install:
  - sudo apt-get install -y upx-ucl
  - export VERSION=${TRAVIS_TAG:$(shell git rev-parse --abbrev-ref HEAD)}

git:
  depth: 1

notifications:
  email: false

deploy:
  provider: releases
  api_key: "$GITHUB_OAUTH_TOKEN"
  file: "build/gudgeon"
  skip_cleanup: true
  overwrite: true
  on:
    tags: true